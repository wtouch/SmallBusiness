<div class="modal-header">
	<button type="button" class="btn btn-danger pull-right" ng-click="modalOptions.close()">Close</a></button>
		<h3 ng-if="!modalOptions.addexam.id" class="text-center">Add Exam</h3> 
		<h3 ng-if="modalOptions.addexam.id" class="text-center">Update Exam</h3>
</div>
	
<div class="modal-body">
		<form class="form-horizontal" name="generalform" role="form" ng-submit="generalform.$valid" novalidate="novalidate" ng-init="modalOptions.addexam.multipleentries=(modalOptions.addexam.multipleentries)?modalOptions.addexam.multipleentries:[]">
		
		<div class="form-group">
				<label for="exam_no" class="col-sm-2 control-label">Exam No *</label>
				<div class="col-sm-9">
					<input type="text" id="exam_no" name="exam_no" class="form-control" ng-model="modalOptions.generalform.exam_no" placeholder="Enter exam_no "  ng-pattern="/^[a-zA-Z0-9- -]*$/"" required>
					<span class="help-block" ng-show="generalform.exam_no.$dirty && generalform.exam_no.$invalid">
						<span ng-show="generalform.exam_no.$error.pattern" class="text-danger">Please enter number </span>
					</span>
				</div>
			</div>
		<div class="form-group" ng-init="modalOptions.getData( false, false,'department', 'departmentList', false, modalOptions)">
				<label for="dept_id" class="col-sm-2 control-label">Department Name </label>
					<div class="col-sm-9">
						<select id="dept_id" class="form-control" ng-model="modalOptions.addexam.dept_id" ng-options="item.id as item.dept_name for item in modalOptions.departmentList"  ng-change="modalOptions.classParams.where.dept_id = modalOptions.addexam.dept_id;modalOptions.getData(false, false,'class', 'ClassList',modalOptions.classParams, modalOptions)" required>
							<option value="">Select Department</option>
						</select>
						<span class="help-block" ng-show="generalform.dept_id.$dirty && generalform.dept_id.$invalid">
						<span ng-show="generalform.dept_id.$error.required" class="text-danger">Department name is required.</span>
						</span>	
					</div>
		</div>
		
		<div class="form-group" ng-if="modalOptions.ClassList && modalOptions.classParams.where.dept_id">
				<label for="class_name" class="col-sm-2 control-label">Class Name </label>
				<div class="col-sm-9">
					<select id="class_id" class="form-control" ng-model="modalOptions.addexam.class_id" ng-options="item.id as item.class_name for item in modalOptions.ClassList"  ng-change="modalOptions.classParams.where.class_id = modalOptions.addexam.class_id;modalOptions.getData(false, false,'division','divisionList', modalOptions.classParams, modalOptions)" required>
							<option value="">Select class</option>
						</select>
					<span class="help-block" ng-show="generalform.class_name.$dirty && generalform.class_name.$invalid">
					<span class="text-danger"  ng-show="generalform.class_name.$error.pattern">Please Enter Valid Name</span>
					<span ng-show="(generalform.class_name.$dirty)" class="text-danger">Please Enter Name only!</span>
					</span>
				</div>
		</div>
			
		 <div class="form-group" ng-if="modalOptions.divisionList && modalOptions.classParams.where.class_id">
			
				<label for="division" class="col-sm-2 control-label">Division * </label>
				<div class="col-sm-9">
					<select id="div_id" class="form-control" ng-model="modalOptions.addexam.div_id" ng-options="item.id as item.division_name for item in modalOptions.divisionList"  ng-change="modalOptions.classParams.where.div_id = modalOptions.addexam.div_id;modalOptions.getData(false, false,'subjects','subjectList', modalOptions.classParams, modalOptions)" required>
						<option value="">Select division</option>
					</select>
					<span class="help-block" ng-show="generalform.div_id.$dirty && generalform.div_id.$invalid">
					<span ng-show="generalform.div_id.$error.required" class="text-danger">division no is required.</span>
					</span>	
				</div>
		</div>
	 </form>
	 
	 <div class="row">
	 <form class="form-horizontal" name="addexamform" role="form" ng-submit="addexamform.$valid" novalidate="novalidate">
		<div class="form-group" ng-if="modalOptions.subjectList && modalOptions.classParams.where.div_id">
				<label for="subject" class="col-sm-2 control-label"> Subject * </label>
				<div class="col-sm-9">
					<select id="sub_id" class="form-control" ng-model="modalOptions.singleentry.sub_id" ng-options="item.id as item.sub_name for item in modalOptions.subjectList" ng-change="modalOptions.classParams.where.sub_id=modalOptions.addexam.sub_id" required>
						<option value="">Select subject</option>
					</select>
					<span class="help-block" ng-show="addexamform.sub_id.$dirty && addexamform.sub_id.$invalid">
					<span ng-show="addexamform.sub_id.$error.required" class="text-danger">subject is required.</span>
					</span>	
				</div>
		</div>
	
		
		 <div class="form-group">
			<div ng-init="modalOptions.getData(false,false,'room','roomList', false, modalOptions)">
				<label for="room" class="col-sm-2 control-label"> Classroom * </label>
				<div class="col-sm-9">
					<select id="room_id" class="form-control" ng-model="modalOptions.singleentry.room_id" ng-options="item.id as item.room_no for item in modalOptions.roomList"  required>
						<option value="">Select room</option>
					</select>
					<span class="help-block" ng-show="addexamform.room_id.$dirty && addexamform.room_id.$invalid">
					<span ng-show="addexamform.room_id.$error.required" class="text-danger">room no is required.</span>
					</span>	
				</div>
			</div>
		</div>
		
		 <div class="form-group">
			<div ng-init="modalOptions.getData(false,false,'staff','staffList', false, modalOptions)">
				<label for="staff" class="col-sm-2 control-label">Supervisor * </label>
				<div class="col-sm-9">
					<select id="staff_id" class="form-control" ng-model="modalOptions.singleentry.staff_id" ng-options="item.id as item.name for item in modalOptions.staffList" required>
						<option value="">Select staff</option>
					</select>
					<span class="help-block" ng-show="addexamform.staff_id.$dirty && addexamform.staff_id.$invalid">
					<span ng-show="addexamform.staff_id.$error.required" class="text-danger">staff name is required.</span>
					</span>	
				</div>
			</div>
		</div> 
		 
		
		 <div class="form-group">
				<label for="day" class="col-sm-2 control-label">Day*</label>
				<div class="col-sm-9">
						<select id="day" name="day" class="form-control" 
						ng-model="modalOptions.singleentry.day"  required="required">
						<option value="" selected>Select day</option>
						<option value="sunday">Sunday</option>
						<option value="monday">Monday</option>
						<option value="Tuesday">Tuesday</option>
						<option value="Wednesday">Wednesday</option>
						<option value="Thursday">Thursday</option>
						<option value="Friday">Friday</option>
						<option value="saturday">saturday</option>
						</select >
						<span class="help-block" ng-show="addexamform.day.$dirty && addexamform.day.$invalid">
						<span ng-show="addexamform.day.$error.required"class="text-danger">Select  Day</span>
						</span>
				</div>
		</div> 
		
		 <div class="form-group">
				<label  for="date" class="col-sm-2 control-label">Date *</label>
				<div class="col-sm-6">
				<input type="text" class="form-control " placeholder="YYYY-DD-MM" id="date" name="date" ng-model="modalOptions.singleentry.date"  ng-init="modalOptions.singleentry.date=modalOptions.date"
				datepicker-popup="{{'dd-MM-yyyy'}}" is-open="opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions"  ng-required="true" close-text="Close" ng-click="opened = !opened"/>
			</div>  
		</div> 
			
			
		 <div class="form-group">
				<label for="timefrom" class="col-sm-2 control-label">Time *</label>
					<div class="col-sm-3">
						<label for="time" class="col-sm-2 control-label">From</label>
						<input type="time" name="timefrom" id="timefrom" ng-model="modalOptions.singleentry.timefrom" placeholder="Enter time" class="form-control" required>
						<span class="text-danger"  ng-show="addexamform.timefrom.$error.pattern">Please enter valid time</span>
						<span class="help-block" ng-show="addexamform.timefrom.$dirty && addexamform.timefrom.$invalid">
							<span ng-show="addexamform.time.$error.required" class="text-danger">time is required.</span>
						</span> 
					</div>
					<div class="col-sm-3">
						<label for="timeto" class="col-sm-2 control-label">To</label>
						<input type="time" name="timeto" id="timeto" ng-model="modalOptions.singleentry.timeto" placeholder="Enter time"  class="form-control" required>
						<span class="text-danger"  ng-show="addexamform.timeto.$error.pattern">Please enter valid time</span>
						<span class="help-block" ng-show="addexamform.timeto.$dirty && addexamform.timeto.$invalid">
							<span ng-show="addexamform.timeto.$error.required" class="text-danger">time is required.</span>
						</span> 
					</div>						
	
			
		<div class="col-sm-2">
				<button type="submit" class="btn btn-success" ng-if="!modalOptions.singleentry.id" ng-disabled="addexamform.$invalid" ng-click="modalOptions.addToObject(modalOptions.addexam.multipleentries, 'singleentry', modalOptions);">
				Add</button>
				
		</div>
	</div> 
</form>
	{{modalOptions.addexam.multipleentries}}
</div>
<div class="table-responsive">
	<table class="table table-bordered" >
			<thead>
				<tr>
					<th class="col-sm-2"style="width:20px;">Sr.No.</th>
					<th class="col-sm-2">Subject Name</th>
					<th class="col-sm-2">Room No</th>
					<th class="col-sm-2">Staff Name</th>
					<th class="col-sm-2">Day</th>
					<th class="col-sm-2">Date</th>
					<th class="col-sm-2">From</th>
					<th class="col-sm-2">To</th>
					<th >Remove</th>
				</tr> 
			</thead>
			<tbody >
				<tr ng-repeat="x in modalOptions.addexam.multipleentries">
					<td>{{$index + 1}}</td>
					<td>{{x.sub_id}}</td>
					<td>{{x.room_id}}</td>
					<td>{{x.staff_id}}</td>
					<td>{{x.day}}</td>
					<td>{{x.date}}</td>
					<td>{{x.timefrom}}</td>
					<td>{{x.timeto}}</td>
					
					<td><button ng-click="modalOptions.removeObject(modalOptions.addexam.multipleentries, $index)">X</button></td>
				</tr>
			</tbody>
		</table>
</div>
	
	<div class="col-sm-offset-2 ">
				 <button type="submit" class="btn btn-success" ng-if="!modalOptions.addexam.id" ng-disabled="generalform.$invalid" ng-click="modalOptions.postData('exam',modalOptions.addexam);modalOptions.ok()">Save</button>
				
				<button type="submit" class="btn btn-success" ng-if="modalOptions.addexam.id" ng-disabled="addexam.$invalid" ng-click="modalOptions.updateData('exam',modalOptions.addexam);modalOptions.ok()">Update Exam</button> 
				
				 <button type="button" class="btn btn-danger" ng-click="modalOptions.close()">Cancel</a> 
	</div>
</div>

		
		
	
			

	