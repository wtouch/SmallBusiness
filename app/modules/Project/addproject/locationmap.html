<form class="form-horizontal" name="locationmapForm" ng-submit="locationmapForm.$valid" novalidate="novalidate">
<h3>Location Map</h3>	
	<div class="row">
		<div class="col-sm-12 text-right">
			<button ng-if="!infra" class="btn btn-default btn-info" ng-click="showForm('infra','locationmap')">Add Location Map</button>
		</div>
	</div>
	 
	<div class="form-group">
		<div class="col-sm-9 col-sm-offset-3">
			<button ng-if="infra && !headingDisabled" class="btn btn-default btn-primary" ng-click=	"addToObject(location_map, project.location_map, 'location_map')" ng-disabled="locationmapForm.$invalid">Add Location Map</button>
			
			<button ng-if="infra && headingDisabled" class="btn btn-default btn-info" ng-click="addToObject(location_map, project.location_map, 'location_map')" title="Add location_map">Edit Details</button>
			
			<button ng-if="infra" class="btn btn-default btn-danger" ng-click="showForm('infra')">
				<span ng-show="infra">Cancel</span>
			</button>
		</div>
	</div>
		
	<div class="form-group">
		<label  for="LocationTitle" class="col-sm-2 control-label">Title *</label>
		<div class="col-sm-9">
			<input type="text"  id="LocationTitle" class="form-control" name="LocationTitle" ng-model="project.location_map.title"  cols="20" rows="4" required />
				 <span class="text-danger" ng-show="locationmapForm.LocationTitle.$error.maxlength">
				Sorry You are Exceeding the Limit</span>
					<span class="text-danger" ng-show="locationmapForm.LocationTitle.$dirty && locationmapForm.LocationTitle.$invalid">
				  <span ng-show="locationmapForm.LocationTitle.$error.required">Title is required .</span>
		</div>
	</div>

	<div class="form-group"> 
		<label for="LocDiscription" class="col-sm-2 control-label">Description *</label> 
		<div class="col-sm-9">
				<textarea class="form-control" id="LocDiscription"  name="LocDiscription" ng-model="project.location_map.description" cols="20" rows="4" ng-maxlength="500" required></textarea>
			<p ng-hide="locationmapForm.LocDiscription.$error.maxlength">{{ 500 - project.location_map.description.length + " Chars left" }}</p>
			 <span class="text-danger" ng-show="locationmapForm.LocDiscription.$error.maxlength">
					Sorry You are Exceeding the Limit</span>
			<span class="text-danger" ng-show="locationmapForm.LocDiscription.$dirty && locationmapForm.LocDiscription.$invalid">
					<span ng-show="locationmapForm.LocDiscription.$error.required">Description is required.</span>
			</span>
		</div>
	</div>	
	<div class="form-group">{{project.location_map.image}}
		<label for="image" class="col-sm-2 control-label">Location Image *</label>
		<div class="col-sm-9">
			<input type="file" id="image" name="image" ng-file-select ng-multiple="true" accept="image/jpeg,image/png, image/gif" ng-file-change="generateThumb($files)" ng-model="image">	
			<!-- This will show thumbnails & progress of images -->
				<file-preview url="image"></file-preview>
				<!-- This button will show if file/s selected -->
				<button ng-show="image" ng-click="upload(image,path,userinfo, 'location_map.image')" type="button">Upload</button>
				<!-- This hidden input will store image path in array after successful uploading-->
				<input type="hidden" ng-model="project.location_map.image">
		</div>
	</div>	
	
	<button type="submit" class="col-sm-offset-2 btn btn-primary" title="Save" ng-disabled="locationmapForm.$invalid" ng-click="showFormPart('layoutmap',1)">Next</button>
	
	
		<div class="table-responsive">
			<table class="table table-bordered table-responsive " ng-if="project.location_map">
				<tr>
					<th>Infrastucture Heading</th>
					<th>Infrastucture Description</th>
					<th>Remove </th>
				</tr>
				<tr ng-repeat="(key, value) in project.location_map">
					<td>{{key}}</td>
					<td class="tdwidth">
						<div class="pull-left" ng-bind-html="value.description"></div>
						<img class="pull-right" ng-src="{{appConfig.assetPath + '/' + value.image.file_relative_path}}" width="150px" />
					</td>
					<td>
						<button class="btn btn-success glyphicon glyphicon-pencil" ng-click="editObject(key,project.location_map, location_map); showForm('infra')" tooltip="Edit Details"></button>
						
						<button class="btn btn-warning glyphicon glyphicon-trash" ng-click="removeObject(key,project.location_map)" tooltip="Remove"></button>			
					</td>
				</tr>
			</table>
		</div>
</form>